define("symbolPalette",["exports"],function(a){function b(){this.init=function(a,b){var c=this;this.name="symbolPalette",this.$input=a,this.symbolGrid=this.convertToGrid(b.symbols);var d='<style>.zyante-bold{font-family:HelveticaNeue-Light,"Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;font-weight:300}.zyante-section-bold{font-family:Helvetica;font-weight:300}div.symbol-palette{background-clip:padding-box;background-color:#fff;border:1px solid #ccc;border-radius:4px;padding:10px;position:absolute;z-index:100000}div.symbol-palette tr:not(:first-child)>td{padding-top:10px}div.symbol-palette td{padding:0}div.symbol-palette td:not(:first-child){padding-left:10px}div.symbol-palette button{background-color:#fff;border:1px solid #ccc;color:#999;height:45px;padding:0;width:50px}div.symbol-palette button:hover:not(.disabled){background-color:#5780a6;color:#fff}</style>',e=this[this.name].symbolPalette({symbols:this.symbolGrid});this.$input.after(e+d),this.$palette=this.$input.next(),this.$symbols=this.$palette.find("button"),this.setPaletteWidth(this.symbolGrid[0].length),this.$palette.hide();var f=this;this.$symbols.click(function(){f.addSymbolToInput($(this))}),this.$input.on("click touchstart focus",function(){f.$palette.is(":visible")||(c.$palette.css("left",c.$input.position().left),c.$palette.show(),$("body").on("click touchstart",c.clickTouchstartEvent),c.$symbols.on("blur",c.blurEvent),c.$input.on("blur",c.blurEvent))})},this.addSymbolToInput=function(a){var b=a.text(),c=this.$input.get(0),d=c.selectionStart,e=this.$input.val(),f=e.substring(0,d),g=e.substring(d),h=f+b+g,i=this.$input.val().length,j=this.$input.attr("maxlength");j>i&&this.$input.val(h);var k=d+b.length;c.focus(),c.setSelectionRange(k,k)},this.hidePalette=function(){this.$palette.hide(),$("body").off("click touchstart",this.clickTouchstartEvent),this.$symbols.off("blur",this.blurEvent),this.$input.off("blur",this.blurEvent)},this.determineWhetherToHidePalette=function(a){var b=a===this.$input.get(0),c=this.$palette.has($(a)).length>0,d=a===this.$palette.get(0);b||c||d||this.hidePalette()};var a=this;this.clickTouchstartEvent=function(b){a.determineWhetherToHidePalette(b.target)},this.blurEvent=function(b){null!==b.relatedTarget?a.determineWhetherToHidePalette(b.relatedTarget):a.$input.is(":disabled")&&a.hidePalette()},this.convertToGrid=function(a){var b=[],c=0,d=4===a.length?2:3;return a.forEach(function(a){c%d===0&&b.push([]),c++,b[b.length-1].push(a)}),b},this.setPaletteWidth=function(a){var b=50,c=10,d=a*b,e=(a-1)*c,f=d+e;this.$palette.css("width",f+"px")},this.symbolPalette=this.symbolPalette||{},this.symbolPalette.symbolPalette=Handlebars.template({1:function(a,b,c,d,e){var f;return"                <tr>\n"+(null!=(f=c.each.call(null!=b?b:a.nullContext||{},b,{name:"each",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+"                </tr>\n"},2:function(a,b,c,d,e){return"                        <td>\n                            <button class='button'>"+a.escapeExpression(a.lambda(b,b))+"</button>\n                        </td>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return"\n<div class='symbol-palette'>\n    <table>\n        <tbody>\n"+(null!=(f=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.symbols:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"        </tbody>\n    </table>\n</div>"},useData:!0})}var c={},d={create:function(){return new b}};c.exports=d,a["default"]=c.exports});