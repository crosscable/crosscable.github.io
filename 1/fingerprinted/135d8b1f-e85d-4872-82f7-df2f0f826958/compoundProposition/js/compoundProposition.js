define("compoundProposition",["exports"],function(a){function b(){this.init=function(a,b,c){this.name="compoundProposition",this.id=a,this.parentResource=b,c&&(this.useShortAnswer=c.useShortAnswer||!1,this.useConditionalOperators=this.useShortAnswer&&c.useConditionalOperators),this.validOperators=["∨","∧","¬"],this.useConditionalOperators&&this.validOperators.push("→","↔"),this.validSymbols=["r","q","p"].concat(this.validOperators,["(",")"]),this.expectedAnswer={expectedDropdowns:[],shortAnswerProposition:"",explanation:""},this.utilities=require("utilities"),this.discreteMathUtilities=require("discreteMathUtilities"),this.progressionTool=require("progressionTool").create();var d='<style>.zyante-bold{font-family:HelveticaNeue-Light,"Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;font-weight:300}.zyante-section-bold{font-family:Helvetica;font-weight:300}.compoundProposition{color:#333;min-height:315px;width:475px}.compoundProposition .dropdown{margin-left:2px;margin-right:2px}.compoundProposition .proposition-in-symbols{font-size:20px}.compoundProposition .proposition-input{line-height:30px;width:120px}.compoundProposition .variables-list li{margin:0 0 3px}</style>',e=this[this.name].compoundProposition(),f=this;this.progressionTool.init(this.id,this.parentResource,{html:e,css:d,numToWin:5,useMultipleParts:!0,start:function(){f.generateQuestion(0),f.focusOnAppropriateInput(),f.addPickOneToDropdown()},reset:function(){f.generateQuestion(0),f.disableInputs()},next:function(a){f.invalidInputEnteredGiveAnotherTry?(f.invalidInputEnteredGiveAnotherTry=!1,f.disableInputs(!0)):(f.generateQuestion(a),f.addPickOneToDropdown()),f.focusOnAppropriateInput()},isCorrect:function(a){var b,c,d,e,g=!1;f.useShortAnswer?(b=f.replaceLookalikeSymbols(f.$inputs.val()),g=f.userAnswerContainsOnlyAnOperator(b),d=!f.shortAnswerIsValid(b),c=f.expectedAnswer.shortAnswerProposition,e=f.discreteMathUtilities.areLogicallyEquivalentPropositions(b,c,f.variables)):(b=[],f.$inputs.each(function(){var a=$(this).find(":selected").val();b.push(a)}),d=-1!==b.indexOf("default"),c=f.expectedAnswer.expectedDropdowns,e=f.doArraysContainSameElementInSameOrder(b,c),b=JSON.stringify(b),c=JSON.stringify(c)),f.disableInputs();var h=f.expectedAnswer.explanation;return(g||d)&&(f.invalidInputEnteredGiveAnotherTry=!0,e=!1,h=g?"You entered an operator but should enter a proposition. Ex: a ∧ b":f.useShortAnswer?"Valid symbols are: "+f.makeValidSymbolList()+".":"Pick an option"),{explanationMessage:h,userAnswer:b,expectedAnswer:c,isCorrect:e}}});var g=$("#"+this.id);if(this.$propositionInWords=g.find(".proposition-in-words"),this.$propositionInSymbols=g.find(".proposition-in-symbols"),this.$variablesList=g.find(".variables-list"),this.useShortAnswer){var h=this[this.name].shortAnswer();this.$propositionInSymbols.html(h),this.$inputs=g.find(".proposition-input"),this.$inputs.keypress(function(a){a.keyCode===f.utilities.ENTER_KEY&&f.progressionTool.check()}),symbolsToIncludeInPalette=["¬","∧","∨"],this.useConditionalOperators&&symbolsToIncludeInPalette.push("→","↔"),this.propositionSymbolPalette=require("symbolPalette").create(),this.propositionSymbolPalette.init(this.$inputs,{symbols:symbolsToIncludeInPalette})}this.generatePotentialQuestions(),this.generateQuestion(0),this.disableInputs()},this.userAnswerContainsOnlyAnOperator=function(a){return a=this.utilities.removeWhitespace(a),this.validOperators.some(function(b){return a===b})},this.makeValidSymbolList=function(){var a="",b=this;return this.validSymbols.forEach(function(c,d){a+=d<b.validSymbols.length-1?c+", ":"and "+c}),a},this.addPickOneToDropdown=function(){this.shortAnswer||this.$inputs.each(function(){$(this).find("option").eq(0).text("Pick one")})},this.escapeForRegularExpression=function(a){var b=[".","$","^","{","[","(","|",")","*","+","?","\\"];return-1!==b.indexOf(a)&&(a="\\"+a),a},this.shortAnswerIsValid=function(a){var b="",c=this;this.validSymbols.forEach(function(a){b+=c.escapeForRegularExpression(a)});var d=new RegExp("^["+b+"\\s]*$"),e=d.test(a),f=/^\s*$/.test(a);return e&&!f},this.replaceLookalikeSymbols=function(a){return a.replace(/\^/g,"∧").replace(/v/g,"∨").replace(/V/g,"∨")},this.doArraysContainSameElementInSameOrder=function(a,b){var c=a.length===b.length,d=a.every(function(a,c){return a===b[c]});return c&&d},this.disableInputs=function(a){a=a||!1,this.$inputs.attr("disabled",!a)},this.focusOnAppropriateInput=function(){this.useShortAnswer&&this.$inputs.focus()},this.notSymbol="&not;",this.andSymbol="&and;",this.orSymbol="&or;",this.variables=["p","q","r"],this.symbolsToEnglish={p:"the weather is bad","¬p":"the weather is good",q:"the trip is cancelled","¬q":"the trip is not cancelled",r:"the trip is delayed","¬r":"the trip is not delayed","∧":" and ","∨":" or ","¬":"the opposite of","(":" (",")":") "},this.symbolsToEnglishFutureTense={p:"the weather will be bad","¬p":"the weather will be good",q:"the trip will be cancelled","¬q":"the trip will not be cancelled",r:"the trip will be delayed","¬r":"the trip will not be delayed"},this.symbolsToEnglishUsingBeing={p:"the weather being bad","¬p":"the weather being good",q:"the trip being cancelled","¬q":"the trip not being cancelled",r:"the trip being delayed","¬r":"the trip not being delayed"},this.symbolsToEnglishUsingToBe={p:"the weather to be bad","¬p":"the weather not to be good",q:"the trip to be cancelled","¬q":"the trip not to be cancelled",r:"the trip to be delayed","¬r":"the trip not to be delayed"},this.harderConnectorsSymbolsToEnglish={"∧":", but "},this.initialCapitalizeAndAddPeriod=function(a){var b=a.trim(),c=b.charAt(0).toUpperCase()+b.slice(1),d=c+".";return d},this.tokenizePropositionInSymbols=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d,f=c+1<a.length;if("¬"===d&&f){var g=a[c+1];-1!==this.variables.indexOf(g)&&(e+=g,c++)}b.push(e)}return b},this.convertTokensToEnglish=function(a,b){b=b||!1;var c="",d=this;return a.forEach(function(a){c+=b&&a in d.harderConnectorsSymbolsToEnglish?d.harderConnectorsSymbolsToEnglish[a]:d.symbolsToEnglish[a]}),c},this.generatePropositionInWords=function(a,b){b=b||!1;var c=this.tokenizePropositionInSymbols(a),d=this.convertTokensToEnglish(c,b);return this.initialCapitalizeAndAddPeriod(d)},this.generateExplanation=function(a,b,c){c=c||!1;var d=this.generatePropositionInWords(a,c),e=this.generatePropositionInWords(b),f=b,g=a;return d+this.utilities.getNewline()+e+this.utilities.getNewline()+f+this.utilities.getNewline()+g},this.twoVariableAndOneOperatorLoops=function(a){var b=["∧","∨"],c=this;this.variables.forEach(function(d){c.variables.forEach(function(c){b.forEach(function(b){var e=d===c,f="∧"===b&&"q"===d&&"r"===c||"r"===d&&"q"===c;e||f||a(d,c,b)})})})},this.generateOneVariableQuestions=function(){var a=[],b=this;return this.variables.forEach(function(c){var d={proposition:"¬"+c,propositionWithParens:"¬("+c+")",expectedDropdowns:[c],propositionInSymbols:b.notSymbol+b.dropdownVariablesHTML};a.push(d)}),this.twoVariableAndOneOperatorLoops(function(c,d,e){var f={proposition:c+e+d,propositionWithParens:"("+c+")"+e+"("+d+")",expectedDropdowns:[d],propositionInSymbols:c+e+b.dropdownVariablesHTML};a.push(f)}),a},this.generateTwoVariableQuestions=function(){var a=[],b=this;return this.twoVariableAndOneOperatorLoops(function(c,d,e){var f={proposition:"¬"+c+e+d,propositionWithParens:"¬("+c+")"+e+"("+d+")",expectedDropdowns:[c,d],propositionInSymbols:b.notSymbol+b.dropdownVariablesHTML+e+b.dropdownVariablesHTML};a.push(f);var g={proposition:c+e+"¬"+d,propositionWithParens:"("+c+")"+e+"¬("+d+")",expectedDropdowns:[c,d],propositionInSymbols:b.dropdownVariablesHTML+e+b.notSymbol+b.dropdownVariablesHTML};a.push(g)}),a},this.generateOneOperatorQuestions=function(){var a=[],b=this;return this.variables.forEach(function(c){var d={proposition:"¬"+c,propositionWithParens:"¬("+c+")",expectedDropdowns:["¬"],propositionInSymbols:b.dropdownOperatorsHTML+c};a.push(d)}),this.twoVariableAndOneOperatorLoops(function(c,d,e){var f={proposition:c+e+d,propositionWithParens:"("+c+")"+e+"("+d+")",expectedDropdowns:[e],propositionInSymbols:c+b.dropdownOperatorsHTML+d};a.push(f)}),a},this.generateTwoOperatorQuestions=function(){var a=[],b=this;return this.twoVariableAndOneOperatorLoops(function(c,d,e){var f={proposition:"¬"+c+e+d,propositionWithParens:"¬("+c+")"+e+"("+d+")",expectedDropdowns:["¬",e],propositionInSymbols:b.dropdownOperatorsHTML+c+b.dropdownOperatorsHTML+d};a.push(f);var g={proposition:c+e+"¬"+d,propositionWithParens:"("+c+")"+e+"¬("+d+")",expectedDropdowns:[e,"¬"],propositionInSymbols:c+b.dropdownOperatorsHTML+b.dropdownOperatorsHTML+d};a.push(g)}),a},this.generateOneOperatorOneVariableQuestions=function(){var a=[],b=this;return this.twoVariableAndOneOperatorLoops(function(c,d,e){var f={proposition:c+e+d,propositionWithParens:"("+c+")"+e+"("+d+")"},g=jQuery.extend({},f,{expectedDropdowns:[c,e],propositionInSymbols:b.dropdownVariablesHTML+b.dropdownOperatorsHTML+d});a.push(g);var h=jQuery.extend({},f,{expectedDropdowns:[e,d],propositionInSymbols:c+b.dropdownOperatorsHTML+b.dropdownVariablesHTML});a.push(h);var i={proposition:"¬"+c+e+d,propositionWithParens:"¬("+c+")"+e+"("+d+")"},j=jQuery.extend({},i,{expectedDropdowns:["¬",c],propositionInSymbols:b.dropdownOperatorsHTML+b.dropdownVariablesHTML+e+d});a.push(j);var k=jQuery.extend({},i,{expectedDropdowns:[c,e],propositionInSymbols:"¬"+b.dropdownVariablesHTML+b.dropdownOperatorsHTML+d});a.push(k);var l=jQuery.extend({},i,{expectedDropdowns:["¬",d],propositionInSymbols:b.dropdownOperatorsHTML+c+e+b.dropdownVariablesHTML});a.push(l);var m=jQuery.extend({},i,{expectedDropdowns:[e,d],propositionInSymbols:"¬"+c+b.dropdownOperatorsHTML+b.dropdownVariablesHTML});a.push(m);var n={proposition:c+e+"¬"+d,propositionWithParens:"("+c+")"+e+"¬("+d+")"},o=jQuery.extend({},n,{expectedDropdowns:[c,e],propositionInSymbols:b.dropdownVariablesHTML+b.dropdownOperatorsHTML+"¬"+d});a.push(o);var p=jQuery.extend({},n,{expectedDropdowns:[c,"¬"],propositionInSymbols:b.dropdownVariablesHTML+e+b.dropdownOperatorsHTML+d});a.push(p);var q=jQuery.extend({},n,{expectedDropdowns:[e,d],propositionInSymbols:c+b.dropdownOperatorsHTML+"¬"+b.dropdownVariablesHTML});a.push(q);var r=jQuery.extend({},n,{expectedDropdowns:["¬",d],propositionInSymbols:c+e+b.dropdownOperatorsHTML+b.dropdownVariablesHTML});a.push(r)}),a},this.generateHarderConnectors=function(){var a=[],b=this;["q","r"].forEach(function(c){[!0,!1].forEach(function(d){var e="p",f=c;if(d){var g=e;e=f,f=g}a.push({proposition:e+"∧¬"+f,propositionWithParens:"("+e+")∧¬("+f+")",expectedDropdowns:["¬",f],propositionInSymbols:e+"∧"+b.dropdownOperatorsHTML+b.dropdownVariablesHTML},{proposition:"¬"+e+"∧"+f,propositionWithParens:"¬("+e+")∧("+f+")",expectedDropdowns:["¬",e],propositionInSymbols:b.dropdownOperatorsHTML+b.dropdownVariablesHTML+"∧"+f})})});var c="¬(q∨r)",d="The trip was neither cancelled nor delayed.",e="¬(r∨q)",f="The trip was neither delayed nor cancelled.";return a.push({proposition:c,expectedDropdowns:["¬","∨"],propositionInSymbols:this.dropdownOperatorsHTML+"(q"+this.dropdownOperatorsHTML+"r)",propositionInWords:d,explanation:d+this.utilities.getNewline()+"The opposite of((the trip was cancelled) or (the trip was delayed))"+this.utilities.getNewline()+c},{proposition:e,expectedDropdowns:["¬","∨"],propositionInSymbols:this.dropdownOperatorsHTML+"(r"+this.dropdownOperatorsHTML+"q)",propositionInWords:f,explanation:f+this.utilities.getNewline()+"The opposite of((the trip was delayed) or (the trip was cancelled))"+this.utilities.getNewline()+e}),a},this.generateConditionalOperator=function(a,b){var c=a+"→"+b,d="If "+this.symbolsToEnglish[a]+", then "+this.symbolsToEnglishFutureTense[b]+".",e="If ("+this.symbolsToEnglish[a]+"), then ("+this.symbolsToEnglishFutureTense[b]+").";return{proposition:c,expectedDropdowns:[],propositionInSymbols:"",propositionInWords:d,explanation:d+this.utilities.getNewline()+e+this.utilities.getNewline()+c}},this.generateConditionalOperators=function(){var a=[],b=this;return["p"].forEach(function(c){["q","r"].forEach(function(d){["","¬"].forEach(function(e){a.push(b.generateConditionalOperator(e+c,e+d))})})}),a.push(this.generateConditionalOperator("r","¬q")),a.push(this.generateConditionalOperator("¬r","¬q")),a.push(this.generateConditionalOperator("q","¬r")),a},this.generateConditionalOperatorWithSufficientConditionWording=function(a,b){var c=a+"→"+b,d=this.initialCapitalizeAndAddPeriod(this.symbolsToEnglishUsingBeing[a]+" is a sufficient condition for "+this.symbolsToEnglishUsingToBe[b]),e=this.initialCapitalizeAndAddPeriod("("+this.symbolsToEnglishUsingBeing[a]+") is a sufficient condition for ("+this.symbolsToEnglishUsingToBe[b]+")");return{proposition:c,expectedDropdowns:[],propositionInSymbols:"",propositionInWords:d,explanation:d+this.utilities.getNewline()+e+this.utilities.getNewline()+c}},this.generateConditionalOperatorsWithSufficientConditionWording=function(){var a=[],b=this;return["p"].forEach(function(c){["q","r"].forEach(function(d){["","¬"].forEach(function(e){a.push(b.generateConditionalOperatorWithSufficientConditionWording(e+c,e+d))})})}),a.push(this.generateConditionalOperatorWithSufficientConditionWording("r","¬q")),a.push(this.generateConditionalOperatorWithSufficientConditionWording("¬r","¬q")),a.push(this.generateConditionalOperatorWithSufficientConditionWording("q","¬r")),a},this.generatePotentialQuestions=function(){var a=[];a=this.useShortAnswer?this.useConditionalOperators?["conditionalOperators","conditionalOperatorsWithSufficientConditionWording","harderConnectors","conditionalOperators","conditionalOperatorsWithSufficientConditionWording"]:["oneVariableQuestions","oneVariableQuestions","twoVariableQuestions","twoVariableQuestions","harderConnectors"]:["oneVariableQuestions","twoVariableQuestions","oneOperatorQuestions","twoOperatorQuestions","oneOperatorOneVariableQuestions"],this.dropdownVariablesHTML=this[this.name].dropdown({options:this.variables});var b=["¬","∧","∨"];this.dropdownOperatorsHTML=this[this.name].dropdown({options:b});var c={oneVariableQuestions:{"function":this.generateOneVariableQuestions,questionSet:[]},twoVariableQuestions:{"function":this.generateTwoVariableQuestions,questionSet:[]},oneOperatorQuestions:{"function":this.generateOneOperatorQuestions,questionSet:[]},twoOperatorQuestions:{"function":this.generateTwoOperatorQuestions,questionSet:[]},oneOperatorOneVariableQuestions:{"function":this.generateOneOperatorOneVariableQuestions,questionSet:[]},harderConnectors:{"function":this.generateHarderConnectors,questionSet:[]},conditionalOperators:{"function":this.generateConditionalOperators,questionSet:[]},conditionalOperatorsWithSufficientConditionWording:{"function":this.generateConditionalOperatorsWithSufficientConditionWording,questionSet:[]}},d=this;this.questions=[];var e=[];a.forEach(function(a){var b=c[a];-1===e.indexOf(a)&&(b.questionSet=b["function"].call(d),e.push(a)),d.questions.push(b.questionSet)}),this.questions.forEach(function(a){d.utilities.shuffleArray(a)})},this.questionIncrementor=0,this.generateQuestion=function(a){var b=this.questions[a],c=b[this.questionIncrementor++%b.length],d=b===this.harderConnectors;this.expectedAnswer={expectedDropdowns:c.expectedDropdowns,shortAnswerProposition:c.proposition},this.expectedAnswer.explanation=c.explanation?c.explanation:this.generateExplanation(c.proposition,c.propositionWithParens,d);var e=this[this.name].listItems({listItems:["p: The weather is bad.","q: The trip is cancelled.","r: The trip is delayed."]});this.$variablesList.html(e);var f=c.propositionInWords?c.propositionInWords:this.generatePropositionInWords(c.proposition,d);this.$propositionInWords.text(f),this.useShortAnswer?this.$inputs.val(""):(this.$propositionInSymbols.html(c.propositionInSymbols),this.$inputs=$("#"+this.id+" .dropdown")),this.disableInputs(!0)},this.compoundProposition=this.compoundProposition||{},this.compoundProposition.compoundProposition=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<div>Define the proposition in symbols using:</div>\n<ul class='variables-list'></ul>\n<div>\n    Proposition in words:\n    <span class='proposition-in-words'></span>\n<div>\n<div>\n    Proposition in symbols:\n    <span class='proposition-in-symbols'></span>\n</div>"},useData:!0}),this.compoundProposition.dropdown=Handlebars.template({1:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return"        <option value='"+g(f(b,b))+"'>"+g(f(b,b))+"</option>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return"<select class='dropdown'>\n    <option value='default'></option>\n"+(null!=(f=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.options:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"</select>"},useData:!0}),this.compoundProposition.listItems=Handlebars.template({1:function(a,b,c,d,e){return"    <li>"+a.escapeExpression(a.lambda(b,b))+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.listItems:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:""},useData:!0}),this.compoundProposition.shortAnswer=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<input class='proposition-input' type='text' maxlength='10'>"},useData:!0})}var c={},d={create:function(){return new b},dependencies:{tools:["utilities","discreteMathUtilities","progressionTool","symbolPalette"]}};c.exports=d,a["default"]=c.exports});