define("propositionTable",["exports"],function(a){function b(){this.init=function(a,b,c){var d=this;this.name="propositionTable",this.id=a,this.parentResource=b,this.useConditional=c&&c.useConditional,this.initializeGlobalVariables(),this.utilities=require("utilities"),this.discreteMathUtilities=require("discreteMathUtilities"),this.progressionTool=require("progressionTool").create();var e='<style>.zyante-bold{font-family:HelveticaNeue-Light,"Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;font-weight:300}.zyante-section-bold{font-family:Helvetica;font-weight:300}div.propositionTable{width:705px}div.propositionTable table{margin:0 auto;text-align:center}div.propositionTable table input.truth-value{margin-bottom:0;text-align:center}div.propositionTable table input.truth-value.wrong-value{border-color:#bb0404;box-shadow:inset 0 1px 2px rgba(0,0,0,.075),0 0 5px rgba(187,4,4,.5)}div.propositionTable table input.truth-value.invalid-value{border-color:#eab51f;box-shadow:inset 0 1px 2px rgba(0,0,0,.075),0 0 5px rgba(234,181,31,.5)}div.propositionTable p.instructions{font-size:26px;text-align:center}</style>',f=this[this.name].propositionTable(),g=this;this.progressionTool.init(this.id,this.parentResource,{html:f,css:e,numToWin:this.numberOfQuestions,useMultipleParts:!0,start:function(){g.generateQuestion(0),g.focusOnAppropriateInput()},reset:function(){g.generateQuestion(0),g.disableInputs()},next:function(a){g.userInputWasInvalid?(g.userInputWasInvalid=!1,g.$truthValues.filter(".invalid-value").each(function(){var a=$(this);a.removeClass("invalid-value").val("")})):g.generateQuestion(a),g.focusOnAppropriateInput()},isCorrect:function i(a){var i=!0,b=!0,c="",e="",f=!1;d.$truthValues.each(function(a){var g=d.$truthValues.eq(a),h=d.expectedTruthValues[a],j=g.val().toUpperCase(),k=h===j;f=f||""===j;var l=!/^(T|F)$/.test(j);l?g.addClass("invalid-value"):k||g.addClass("wrong-value"),c+=j+",",e+=h+",",b=b&&!l,i=i&&k});var g=0,h=d.tableModel.nonHeaders.map(function(a){return a.map(function(a){return""===a.value?(g++,d.$truthValues.eq(g-1).val().toUpperCase()):a.value}).join(" ")}),j=new Set(h.filter(function(a){return h.indexOf(a)!==h.lastIndexOf(a)})),k="Each answer must be either T or F. See highlighted.";if(b)if(i)k="Correct.";else{var l=!d.useConditional&&(4===a||0===a);k="Each wrong answer is highlighted.",l&&(k="Each highlighted answer does not match the pattern.")}else d.userInputWasInvalid=!0,d.$truthValues.removeClass("wrong-value"),f&&(k="You did not provide an answer in all fields. See highlighted.");return j.size>0&&(k+="\nYou entered duplicate row(s): "+Array.from(j).join(", ")),d.disableInputs(),{isCorrect:i,explanationMessage:k,expectedAnswer:e,userAnswer:c}}});var h=$("#"+this.id);this.$table=h.find("div.table"),this.$instructions=h.find(".instructions"),this.generateNonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty(),this.initializeTableModelGeneratorFunctions(),this.generateQuestion(0)},this.enableInputs=function(){this.$truthValues.attr("disabled",!1)},this.disableInputs=function(){this.$truthValues.attr("disabled",!0)},this.focusOnAppropriateInput=function(){this.enableInputs(),this.$truthValues.each(function(){var a=$(this);return""===a.val()?(a.focus(),!1):void 0})},this.setupTruthValues=function(){this.$truthValues=$("#"+this.id+" input.truth-value");var a=this;this.$truthValues.keypress(function(b){13===b.keyCode&&a.progressionTool.check()})},this.initializeGlobalVariables=function(){this.numberOfQuestions=this.useConditional?5:8,this.expectedTruthValues=[],this.userInputWasInvalid=!1,this.tableModelGeneratorFunctions=[]},this.initializeTableModelGeneratorFunctions=function(){this.useConditional?this.tableModelGeneratorFunctions=[this.generateTableModelAndOutputInstructionsForFirstQuestionWithConditionals,this.generateTableModelAndOutputInstructionsForSecondQuestionWithConditionals,this.generateTableModelAndOutputInstructionsForThirdQuestionWithConditionals,this.generateTableModelAndOutputInstructionsForFourthQuestionWithConditionals,this.generateTableModelAndOutputInstructionsForFifthQuestionWithConditionals]:this.tableModelGeneratorFunctions=[this.generateTableModelAndOutputInstructionsForFirstQuestion,this.generateTableModelAndOutputInstructionsForSecondQuestion,this.generateTableModelAndOutputInstructionsForThirdQuestion,this.generateTableModelAndOutputInstructionsForFourthQuestion,this.generateTableModelAndOutputInstructionsForFifthQuestion,this.generateTableModelAndOutputInstructionsForSixthQuestion,this.generateTableModelAndOutputInstructionsForSeventhQuestion,this.generateTableModelAndOutputInstructionsForEighthQuestion]},this.returnTwoVariableConditionalProposition=function(a){var b=this.utilities.pickNumberInRange(0,1)?"¬":"",c=this.utilities.pickNumberInRange(0,1)?"¬":"",d="p",e="q";this.utilities.pickNumberInRange(0,1)&&(d="q",e="p");var f=a?"↔":"→",g=b+d+f+c+e;return g},this.generateTableModelAndOutputInstructionsForFirstQuestionWithConditionals=function(a){a=a||!1;var b=this.returnTwoVariableConditionalProposition(a);this.generateExpectedTruthValuesForPropositionWithTwoVariables(b),this.$instructions.text("Fill in "+b+".");var c={headers:["p","q",b],nonHeaders:this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty};return c},this.generateTableModelAndOutputInstructionsForSecondQuestionWithConditionals=function(){return this.generateTableModelAndOutputInstructionsForFirstQuestionWithConditionals(!0)},this.generateTableModelAndOutputInstructionsForThirdQuestionWithConditionals=function(){var a=this.utilities.pickNumberInRange(0,1)?"p":"q",b=this.utilities.pickNumberInRange(0,1)?"∧":"∨",c=this.utilities.pickNumberInRange(0,1),d=this.returnTwoVariableConditionalProposition(c),e=a+b+"("+d+")";this.generateExpectedTruthValuesForPropositionWithTwoVariables(e),this.$instructions.text("Fill in "+e+".");var f={headers:["p","q",e],nonHeaders:this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty};return f},this.generateTableModelAndOutputInstructionsForFourthQuestionWithConditionals=function(a){a=a||!1;var b=a&&this.utilities.pickNumberInRange(0,1)?"¬":"",c=a&&this.utilities.pickNumberInRange(0,1)?"¬":"",d=a&&this.utilities.pickNumberInRange(0,1)?"¬":"",e=["p","q","r"];this.utilities.shuffleArray(e);var f=e[0],g=e[1],h=e[2],i=this.utilities.pickNumberInRange(0,1)?"∧":"∨",j=this.utilities.pickNumberInRange(0,1)?"↔":"→",k=b+f+j+"("+c+g+i+d+h+")";this.generateExpectedTruthValuesForPropositionWithThreeVariables(k),this.$instructions.text("Fill in "+k+".");var l={headers:["p","q","r",k],nonHeaders:this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty()};return l},this.generateTableModelAndOutputInstructionsForFifthQuestionWithConditionals=function(){return this.generateTableModelAndOutputInstructionsForFourthQuestionWithConditionals(!0)},this._makeValueTrueInputFalse=function(){return{value:"T",isInput:!1}},this._makeValueFalseInputFalse=function(){return{value:"F",isInput:!1}},this._makeInputTrue=function(){return{value:"",isInput:!0}},this.generateTableModelAndOutputInstructionsForFirstQuestion=function(){this.$instructions.text("Using the pattern above, fill in all combinations of p and q.");var a={headers:["p","q"],nonHeaders:[]},b=this.utilities.pickNumberInRange(0,1);return 0===b?(a.nonHeaders.push([this._makeValueTrueInputFalse(),this._makeValueTrueInputFalse()],[this._makeValueTrueInputFalse(),this._makeInputTrue()]),this.expectedTruthValues.push("F")):(a.nonHeaders.push([this._makeValueTrueInputFalse(),this._makeInputTrue()],[this._makeValueTrueInputFalse(),this._makeValueFalseInputFalse()]),this.expectedTruthValues.push("T")),b=this.utilities.pickNumberInRange(0,1),0===b?(a.nonHeaders.push([this._makeInputTrue(),this._makeValueTrueInputFalse()],[this._makeInputTrue(),this._makeInputTrue()]),this.expectedTruthValues.push("F"),this.expectedTruthValues.push("F"),this.expectedTruthValues.push("F")):(a.nonHeaders.push([this._makeInputTrue(),this._makeInputTrue()],[this._makeInputTrue(),this._makeValueFalseInputFalse()]),this.expectedTruthValues.push("F"),this.expectedTruthValues.push("T"),this.expectedTruthValues.push("F")),a},this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty=[],this.generateNonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty=function(){var a=this;["T","F"].forEach(function(b){["T","F"].forEach(function(c){a.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty.push([{value:b,isInput:!1},{value:c,isInput:!1},{value:"",isInput:!0}])})})},this.randomlyReturnAnElementInArray=function(a){return this.utilities.shuffleArray(a),a[0]},this.generateExpectedTruthValuesForPropositionWithTwoVariables=function(a){var b=this;["T","F"].forEach(function(c){["T","F"].forEach(function(d){var e=a.replace(/p/g,c).replace(/q/g,d),f=b.discreteMathUtilities.evaluateProposition(e);b.expectedTruthValues.push(f?"T":"F")})})},this.generateTableModelAndOutputInstructionsForSecondQuestion=function(){var a=["¬p","¬q","p∧q","p∨q"],b=this.randomlyReturnAnElementInArray(a);this.generateExpectedTruthValuesForPropositionWithTwoVariables(b),this.$instructions.text("Fill in "+b+".");var c={headers:["p","q",b],nonHeaders:this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty};return c},this.generateTableModelAndOutputInstructionsForThirdQuestion=function(){var a=["¬p∧q","p∧¬q","¬p∨q","p∨¬q","¬p∨¬q","¬p∧¬q","¬q∧p","q∧¬p","¬q∨p","q∨¬p","¬q∨¬p","¬q∧¬p"],b=this.randomlyReturnAnElementInArray(a);this.generateExpectedTruthValuesForPropositionWithTwoVariables(b),this.$instructions.text("Fill in "+b+".");var c={headers:["p","q",b],nonHeaders:this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty};return c},this.generateTableModelAndOutputInstructionsForFourthQuestion=function(){var a=this.utilities.pickNumberInRange(0,1),b=a?"∧":"∨";a=this.utilities.pickNumberInRange(0,1);var c=a?"∧":"∨",d=["p","q"];this.utilities.shuffleArray(d);var e;e=b===c?[d[0]+b+d[1]+c+d[1],d[0]+b+d[1]+c+"¬"+d[1],d[0]+b+"¬"+d[1]+c+d[1],d[0]+b+"¬"+d[1]+c+"¬"+d[1],"¬"+d[0]+b+d[1]+c+d[1],"¬"+d[0]+b+d[1]+c+"¬"+d[1],"¬"+d[0]+b+"¬"+d[1]+c+d[1],"¬"+d[0]+b+"¬"+d[1]+c+"¬"+d[1]]:[d[0]+b+"("+d[1]+c+d[1]+")",d[0]+b+"("+d[1]+c+"¬"+d[1]+")","("+d[0]+b+"¬"+d[1]+")"+c+d[1],"("+d[0]+b+"¬"+d[1]+")"+c+"¬"+d[1],"(¬"+d[0]+b+d[1]+")"+c+d[1],"(¬"+d[0]+b+d[1]+")"+c+"¬"+d[1],"(¬"+d[0]+b+"¬"+d[1]+")"+c+d[1],"(¬"+d[0]+b+"¬"+d[1]+")"+c+"¬"+d[1]];var f=this.randomlyReturnAnElementInArray(e);this.generateExpectedTruthValuesForPropositionWithTwoVariables(f),this.$instructions.text("Fill in "+f+".");var g={headers:["p","q",f],nonHeaders:this.nonHeadersForTwoVariablesFilledOutAndOnePropositionEmpty};return g},this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty=function(){var a=[];return["T","F"].forEach(function(b){["T","F"].forEach(function(c){["T","F"].forEach(function(d){a.push([{value:b,isInput:!1},{value:c,isInput:!1},{value:d,isInput:!1},{value:"",isInput:!0}])})})}),a},this.generateExpectedTruthValuesForPropositionWithThreeVariables=function(a){var b=this;["T","F"].forEach(function(c){["T","F"].forEach(function(d){["T","F"].forEach(function(e){var f=a.replace(/p/g,c).replace(/q/g,d).replace(/r/g,e),g=b.discreteMathUtilities.evaluateProposition(f);b.expectedTruthValues.push(g?"T":"F")})})})},this.generateTableModelAndOutputInstructionsForFifthQuestion=function(){var a=this,b=this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty();b.forEach(function(a){return a.pop()});var c=!1,d=null,e=function(){a.expectedTruthValues.length=0,d=JSON.parse(JSON.stringify(b));var e=[];d.forEach(function(b){c=!1;var d=null,f=0,g=5;do{d=b.slice();var h=a.utilities.pickElementFromArray(d),i=h.value;h.value="",c=e.some(function(a){return a.every(function(a,b){return a.value===d[b].value})}),c?(h.value=i,f++):(a.expectedTruthValues.push(i),h.isInput=!0)}while(c&&g>f);c||e.push(d)})};do e();while(c);var f={headers:["p","q","r"],nonHeaders:d};return this.$instructions.text("Using the pattern above, fill in all combinations of p, q, and r."),f},this.generateTableModelAndOutputInstructionsForSixthQuestion=function(){var a=this.utilities.pickNumberInRange(0,1),b=a?"∧":"∨";a=this.utilities.pickNumberInRange(0,1);var c=a?"∧":"∨",d=["p","q","r"];this.utilities.shuffleArray(d);var e;e=b===c?[d[0]+b+d[1]+c+d[2],d[0]+b+d[1]+c+d[2]]:[d[0]+b+"("+d[1]+c+d[2]+")","("+d[0]+b+d[1]+")"+c+d[2]];var f=this.randomlyReturnAnElementInArray(e);this.generateExpectedTruthValuesForPropositionWithThreeVariables(f),this.$instructions.text("Fill in "+f+".");var g={headers:["p","q","r",f],nonHeaders:this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty()};return g},this.generateTableModelAndOutputInstructionsForSeventhQuestion=function(){var a=this.utilities.pickNumberInRange(0,1),b=a?"∧":"∨";a=this.utilities.pickNumberInRange(0,1);var c=a?"∧":"∨",d=["p","q","r"];this.utilities.shuffleArray(d);var e;e=b===c?[d[0]+b+d[1]+c+"¬"+d[2],d[0]+b+"¬"+d[1]+c+d[2],d[0]+b+"¬"+d[1]+c+"¬"+d[2],"¬"+d[0]+b+d[1]+c+d[2],"¬"+d[0]+b+d[1]+c+"¬"+d[2],"¬"+d[0]+b+"¬"+d[1]+c+d[2],"¬"+d[0]+b+"¬"+d[1]+c+"¬"+d[2]]:[d[0]+b+"("+d[1]+c+"¬"+d[2]+")","("+d[0]+b+"¬"+d[1]+")"+c+d[2],"("+d[0]+b+"¬"+d[1]+")"+c+"¬"+d[2],"(¬"+d[0]+b+d[1]+")"+c+d[2],"(¬"+d[0]+b+d[1]+")"+c+"¬"+d[2],"(¬"+d[0]+b+"¬"+d[1]+")"+c+d[2],"(¬"+d[0]+b+"¬"+d[1]+")"+c+"¬"+d[2]];var f=this.randomlyReturnAnElementInArray(e);this.generateExpectedTruthValuesForPropositionWithThreeVariables(f),this.$instructions.text("Fill in "+f+".");var g={headers:["p","q","r",f],nonHeaders:this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty()};return g},this.generateTableModelAndOutputInstructionsForEighthQuestion=function(){var a=this.utilities.pickNumberInRange(0,1),b=a?"∧":"∨";a=this.utilities.pickNumberInRange(0,1);var c=a?"∧":"∨",d=["p","q","r"];this.utilities.shuffleArray(d);var e;e=b===c?[d[0]+b+"¬"+d[1]+c+d[2],"¬"+d[0]+b+d[1]+c+d[2],"¬"+d[0]+b+"¬"+d[1]+c+d[2],"¬"+d[0]+b+d[1]+c+"¬"+d[2]]:[d[0]+b+"¬("+d[1]+c+d[2]+")","¬("+d[0]+b+d[1]+")"+c+d[2],"¬"+d[0]+b+"¬("+d[1]+c+d[2]+")","¬("+d[0]+b+d[1]+")"+c+"¬"+d[2]];var f=this.randomlyReturnAnElementInArray(e);this.generateExpectedTruthValuesForPropositionWithThreeVariables(f),this.$instructions.text("Fill in "+f+".");var g={headers:["p","q","r",f],nonHeaders:this.generateNonHeadersForThreeVariablesFilledOutAndOnePropositionEmpty()};return g},this.generateQuestion=function(a){this.expectedTruthValues.length=0,this.tableModel=this.tableModelGeneratorFunctions[a].call(this);var b=this[this.name].table(this.tableModel);this.$table.html(b),this.setupTruthValues()},this.reset=function(){this.progressionTool.reset()},this.propositionTable=this.propositionTable||{},this.propositionTable.propositionTable=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<p class='instructions'></p>\n<div class='table'></div>"},useData:!0}),this.propositionTable.table=Handlebars.template({1:function(a,b,c,d,e){return"                <th>"+a.escapeExpression(a.lambda(b,b))+"</th>\n"},3:function(a,b,c,d,e){var f;return"            <tr>\n"+(null!=(f=c.each.call(null!=b?b:a.nullContext||{},b,{name:"each",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+"            </tr>\n"},4:function(a,b,c,d,e){var f;return"                    <td>\n"+(null!=(f=c["if"].call(null!=b?b:a.nullContext||{},null!=b?b.isInput:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.program(7,e,0),data:e}))?f:"")+"                    </td>\n"},5:function(a,b,c,d,e){return"                            <input class='truth-value' type='text' maxlength='1' size='2' disabled/>\n"},7:function(a,b,c,d,e){return"                            "+a.escapeExpression(a.lambda(null!=b?b.value:b,b))+"\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return"\n<table>\n    <tbody>\n        <tr>\n"+(null!=(f=c.each.call(g,null!=b?b.headers:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"        </tr>\n"+(null!=(f=c.each.call(g,null!=b?b.nonHeaders:b,{name:"each",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"    </tbody>\n</table>"},useData:!0})}var c={};c.exports={create:function(){return new b},dependencies:{tools:["utilities","discreteMathUtilities","progressionTool"]}},a["default"]=c.exports});